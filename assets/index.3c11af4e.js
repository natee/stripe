import{I as V,o as m,h as v,t as k,l as a,n as p,g as T,L as D,v as _,x as B,r as j,j as t,i as u,R as h,S as b,m as N,X as y,w as I,q as L}from"./vendor.ad69f759.js";import{i as $}from"./request.751fbdec.js";import{_ as w,F as C}from"./Footer.3632b9d8.js";import{b as E,c as A}from"./index.abe004fc.js";import"./index.1278bfca.js";const F=["disabled"],S={props:{maxSecondNum:{type:Number,default:60},buttonText:{type:String,default:"\u83B7\u53D6\u9A8C\u8BC1\u7801"},loadingText:{type:String,default:"\u53D1\u9001\u4E2D"},loading:{type:Boolean,default:!1}},setup(l,{emit:f}){const s=l,e=V({timing:!1,count:0}),c=()=>{e.timing=!0,e.count=s.maxSecondNum;const o=setInterval(()=>{const{count:n}=e;n>0&&n<=s.maxSecondNum?e.count--:(e.timing=!1,clearInterval(o),e.count=0)},1e3)};return(o,n)=>(m(),v("button",{class:p(["btn-indigo w-full",{"btn-indigo--disabled":a(e).timing}]),disabled:a(e).timing,onClick:n[0]||(n[0]=x=>f("start",x,c))},k(l.loading?l.loadingText:a(e).timing?l.buttonText+"("+a(e).count+")":l.buttonText),11,F))}},R={class:"h-full flex items-center justify-center flex-col"},U={class:"w-full flex-1 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},q={class:"w-full max-w-lg space-y-8"},z={class:"rounded shadow sm:rounded-md sm:overflow-hidden sm:p-16 bg-white p-8 pt-4"},M=t("h2",{class:"mt-6 text-left text-xl font-medium text-gray-900"},"Sign in to your account",-1),W={class:"mt-8"},X={class:"rounded-md shadow-sm"},G=t("label",{for:"email-address",class:"block text-sm font-medium text-gray-700"},"Email",-1),H={key:0,href:"#",class:"font-medium text-indigo-600 hover:text-indigo-500"},J={class:"mt-4"},K={key:0,class:"mt-8"},O={class:"rounded-md shadow-sm"},P=L('<div class="flex items-center justify-between"><div class="flex items-center"><label for="code" class="block text-sm font-medium text-gray-700">Code</label></div><div class="text-sm"><a href="#" class="text-sm text-indigo-600 hover:text-indigo-500"> Didn\u2019t receive the email? 30s </a></div></div>',1),Q={class:"mt-8"},Y=["disabled"],Z={class:"flex items-center justify-between"},ee={class:"text-sm"},te=t("span",{class:"text-sm text-gray-900"},"Don't have an account?",-1),se=N(" Sign up "),de={setup(l){T({CountDownButton:S,Logo:w,Footer:C});const f=D(),s=_(""),e=_(""),c=_(!1),o=B(()=>s.value&&$(s.value)),n=async(r,i)=>{if(o.value)try{c.value=!0;const d=await E(s.value);d.code===0?(e.value=d.data.code,c.value=!1,typeof i=="function"&&i()):console.error("\u53D1\u9001\u5931\u8D25")}catch(d){console.error(d.message)}else console.error(`email invalid: ${s.value}`)},x=async()=>{try{const{code:r}=await A(s.value,e.value);r===0&&f.push("/dashboard")}catch(r){console.error(r.message)}};return(r,i)=>{const d=j("router-link");return m(),v("div",R,[t("div",U,[t("div",q,[u(w),t("div",z,[M,t("div",W,[t("div",X,[G,h(t("input",{name:"email",type:"email",autocomplete:"email",class:"input",placeholder:"Email address","onUpdate:modelValue":i[0]||(i[0]=g=>s.value=g)},null,512),[[b,s.value]])]),t("div",{class:p(["mt-2 w-full text-gray-500 text-xs",{visible:s.value,invisible:!s.value}])},[N(k(a(o)?"\u{1F389} \xA0Awesome stuff. We sent you a code to confirm your email":s.value&&!a(o)?"Invalid email address. Did we make a mistake?":"\xA0")+" ",1),s.value&&!a(o)?(m(),v("a",H,"Let us know")):y("",!0)],2),t("div",J,[u(S,{buttonText:"Send Code",maxSecondNum:30,loading:c.value,onStart:n},null,8,["loading"])])]),a(o)?(m(),v("div",K,[t("div",O,[P,h(t("input",{name:"code",type:"text",class:"input","onUpdate:modelValue":i[1]||(i[1]=g=>e.value=g)},null,512),[[b,e.value]])]),t("div",Q,[t("button",{type:"button",class:p(["btn-indigo w-full",{"btn-indigo--disabled":!s.value||!e.value}]),disabled:!s.value||!e.value,onClick:x}," Login ",10,Y)])])):y("",!0)]),t("div",Z,[t("div",ee,[te,u(d,{to:"/register",class:"text-indigo-600 hover:text-indigo-500"},{default:I(()=>[se]),_:1})])])])]),u(C)])}}};export{de as default};
