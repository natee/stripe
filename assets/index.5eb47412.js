import{m as V,o as m,x as v,C as S,u as a,B as p,e as D,f as _,g as T,r as B,z as t,v as u,J as h,K as b,D as N,M as y,y as E,E as $,G as j}from"./vendor.f9707277.js";import{i as I,b as L,c as z}from"./index.149a222e.js";import{_ as w,F as C}from"./Footer.a36a0c9f.js";import"./index.07db9219.js";const A=["disabled"],k={props:{maxSecondNum:{type:Number,default:60},buttonText:{type:String,default:"\u83B7\u53D6\u9A8C\u8BC1\u7801"},loadingText:{type:String,default:"\u53D1\u9001\u4E2D"},loading:{type:Boolean,default:!1}},setup(l,{emit:f}){const s=l,e=V({timing:!1,count:0}),c=()=>{e.timing=!0,e.count=s.maxSecondNum;const o=setInterval(()=>{const{count:n}=e;n>0&&n<=s.maxSecondNum?e.count--:(e.timing=!1,clearInterval(o),e.count=0)},1e3)};return(o,n)=>(m(),v("button",{class:p(["btn-indigo w-full",{"btn-indigo--disabled":a(e).timing}]),disabled:a(e).timing,onClick:n[0]||(n[0]=x=>f("start",x,c))},S(l.loading?l.loadingText:a(e).timing?l.buttonText+"("+a(e).count+")":l.buttonText),11,A))}},F={class:"h-full flex items-center justify-center flex-col"},M={class:"w-full flex-1 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},U={class:"w-full max-w-lg space-y-8"},G={class:"rounded shadow sm:rounded-md sm:overflow-hidden bg-white p-16 pt-4"},J=t("h2",{class:"mt-6 text-left text-xl font-medium text-gray-900"},"Sign in to your account",-1),K={class:"mt-8"},R={class:"rounded-md shadow-sm"},W=t("label",{for:"email-address",class:"block text-sm font-medium text-gray-700"},"Email",-1),q={key:0,href:"#",class:"font-medium text-indigo-600 hover:text-indigo-500"},H={class:"mt-4"},O={key:0,class:"mt-8"},P={class:"rounded-md shadow-sm"},Q=$('<div class="flex items-center justify-between"><div class="flex items-center"><label for="code" class="block text-sm font-medium text-gray-700">Code</label></div><div class="text-sm"><a href="#" class="text-sm text-indigo-600 hover:text-indigo-500"> Didn\u2019t receive the email? 30s </a></div></div>',1),X={class:"mt-8"},Y=["disabled"],Z={class:"flex items-center justify-between"},ee={class:"text-sm"},te=t("span",{class:"text-sm text-gray-900"},"Don't have an account?",-1),se=N(" Sign up "),le={setup(l){D({CountDownButton:k,Logo:w,Footer:C});const f=j(),s=_(""),e=_(""),c=_(!1),o=T(()=>s.value&&I(s.value)),n=async(r,i)=>{if(o.value)try{c.value=!0;const d=await L(s.value);d.code===0?(e.value=d.data.code,c.value=!1,typeof i=="function"&&i()):console.error("\u53D1\u9001\u5931\u8D25")}catch(d){console.error(d.message)}else console.error(`email invalid: ${s.value}`)},x=async()=>{try{const{code:r}=await z(s.value,e.value);r===0&&f.push("/dashboard")}catch(r){console.error(r.message)}};return(r,i)=>{const d=B("router-link");return m(),v("div",F,[t("div",M,[t("div",U,[u(w),t("div",G,[J,t("div",K,[t("div",R,[W,h(t("input",{name:"email",type:"email",autocomplete:"email",class:"input",placeholder:"Email address","onUpdate:modelValue":i[0]||(i[0]=g=>s.value=g)},null,512),[[b,s.value]])]),t("div",{class:p(["mt-2 w-full text-gray-500 text-xs",{visible:s.value,invisible:!s.value}])},[N(S(a(o)?"\u{1F389} \xA0Awesome stuff. We sent you a code to confirm your email":s.value&&!a(o)?"Invalid email address. Did we make a mistake?":"\xA0")+" ",1),s.value&&!a(o)?(m(),v("a",q,"Let us know")):y("",!0)],2),t("div",H,[u(k,{buttonText:"Send Code",maxSecondNum:30,loading:c.value,onStart:n},null,8,["loading"])])]),a(o)?(m(),v("div",O,[t("div",P,[Q,h(t("input",{name:"code",type:"text",class:"input","onUpdate:modelValue":i[1]||(i[1]=g=>e.value=g)},null,512),[[b,e.value]])]),t("div",X,[t("button",{type:"button",class:p(["btn-indigo w-full",{"btn-indigo--disabled":!s.value||!e.value}]),disabled:!s.value||!e.value,onClick:x}," Login ",10,Y)])])):y("",!0)]),t("div",Z,[t("div",ee,[te,u(d,{to:"/register",class:"text-indigo-600 hover:text-indigo-500"},{default:E(()=>[se]),_:1})])])])]),u(C)])}}};export{le as default};
